#include "bits/stdc++.h"
using namespace std;
using ll = long long;
using pii = pair<int,int>;
using pll = pair<ll,ll>;
template<typename T>
int sz(const T &a){return int(a.size());}
const int MN=1e6+1;
int arr[2*MN];
int cnt[MN];
int main(){
    cin.tie(NULL);
    ios_base::sync_with_stdio(false);
    int n,c;
    cin>>n>>c;
    ll tot=ll(n)*ll(n-1)*ll(n-2)/ll(3)/ll(2);
    for(int i=0;i<n;i++){
        cin>>arr[i];
        cnt[arr[i]]++;
    }
    sort(arr,arr+n);
    for(int i=0;i<n;i++)arr[i+n]=arr[i]+c;
    int ptr=0;
    int half=c/2;
    for(int i=0;i<n;i++){
        while(arr[ptr+1]<=arr[i]+half)ptr++;
        ll am=ptr-i;
        tot-=am*(am-1)/2;
    }
    if(c%2==0) {
        for (int i = 0; i + half < c; i++) {
            ll a = cnt[i], b = cnt[i + half];
            for (int j = 0; j < a; j++) {
                ll am = a + b - j - 1;
                tot += am * (am - 1) / 2;
            }
            for (int j = 0; j < b; j++) {
                ll am = a + b - j - 1;
                tot += am * (am - 1) / 2;
            }
            tot -= (a + b) * (a + b - 1) * (a + b - 2) / ll(3) / ll(2);
        }
    }
    printf("%lli\n",tot);
    return 0;
}